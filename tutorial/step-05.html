<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step 5 - Tutorial - Woc.ts</title>
    <link rel="stylesheet" href="/theme/main.css">
  </head>
  <body class="ob-bgGreyArea">
    <header class="SiteHeader">
      <div class="ob-pageWrapper pos large">
        <div class="SiteHeader-left"><a href="/" class="BlockLink light">Woc.ts</a></div>
        <div class="SiteHeader-right"><a href="/presentation.html" class="BlockLink light">Presentation</a><a href="/tutorial/" class="BlockLink light noMargin">Tutorial</a></div>
      </div>
    </header>
    <div class="PageBody ob-pageWrapper large">
      <main class="PageBody-main">
        <div class="Paper side ob-text longTitle"><h1 id="step-5-todos-list-dynamic-template-data-binding-with-vue-js-">Step 5 - <code>Todos.List</code>: Dynamic template <em>Data binding with Vue.js</em></h1>
<p>The template engine <a href="http://vuejs.org/">Vue.js</a> provides a nice API. Let’s change our component <code>Todos.List</code> to use some data binding.</p>
<h2 id="in-the-html-template">In the HTML template</h2>
<p>Edit the file <code>Todos.List.wocc/List.html</code>, then replace the three elements <code>&lt;li&gt;</code> with the code below:</p>
<pre><code class="lang-markup">&lt;li class=&quot;TodosList-li&quot; v-repeat=&quot;task: tasks&quot;&gt;
  &lt;button class=&quot;TodosList-rmBtn&quot; v-on=&quot;click: rmTask(task.id)&quot;&gt;×&lt;/button&gt;
  &lt;a class=&quot;TodosList-editBtn&quot; type=&quot;button&quot; href=&quot;#task/{{task.id}}&quot; v-text=&quot;task.title&quot;&gt;&lt;/a&gt;
&lt;/li&gt;
</code></pre>
<p>On the element <code>&lt;li&gt;</code>, the directive <code>v-repeat</code> means this element will be repeated for each item in the list <code>tasks</code>. We’ll see how to set a data list in the next section.</p>
<p>On the element <code>&lt;button&gt;</code>, the directive <code>v-on</code> set an event handler on the element: the callback function <code>rmTask</code> will be called. We’ll see in the next section how to define it.</p>
<p>On the element <code>&lt;a&gt;</code>, we define a computed attribute <code>href</code> and a directive <code>v-text</code>. The attribute <code>href</code> will be used when we’ll use a router at the step 10. The directive fill the content of the element with the value of <code>task.title</code>.</p>
<h2 id="in-the-typescript-code">In the TypeScript code</h2>
<p>Edit the file <code>Todos.List.wocc/List.ts</code> and replace all the class with the code below:</p>
<pre><code class="lang-typescript">export class List implements Woc.Component {
  private tplData;

  constructor(private cc: WocTeam.VueComponentContext) {
    this.tplData = {
      tasks: [
        {
          id: 1,
          title: &#39;First task&#39;
        },
        {
          id: 2,
          title: &#39;Second task&#39;
        }
      ]
    };
  }

  public attachTo(el: HTMLElement): void {
    this.cc.bindTemplate({
      el: el,
      wocTemplate: &#39;TodosList&#39;,
      data: this.tplData,
      methods: {
        rmTask: (id) =&gt; {
          this.removeItem(id);
        }
      }
    });
  }

  private removeItem(id: number): void {
    for (var i = 0, len = this.tplData.tasks.length; i &lt; len; ++i) {
      if (this.tplData.tasks[i][&#39;id&#39;] === id) {
        this.tplData.tasks.splice(i, 1);
        break;
      }
    }
  }
}
</code></pre>
<p>The private member <code>tplData</code> contains the <code>tasks</code> array, which is used in the template. Then, the method <code>bindTemplate</code> is called with a new attribute <code>data</code> set on <code>tplData</code>.</p>
<p>In addition, the method <code>bindTemplate</code> has an attribute <code>methods</code> that contains our callback function <code>rmTask</code>. Notice: The implementation in <code>removeItem</code> is not performant but we’ll replace it when we’ll use a true model at the step 8.</p>
<h2 id="run-in-the-browser">Run in the browser</h2>
<p>Reload the application in the browser. Test the delete buttons.</p>

        </div>
      </main>
      <div class="PageBody-side Sidebar">
        <nav class="Widget">
          <ul class="SimpleList">
            <li class="SimpleList-li"><a href="step-00.html" class="SmallBlockLink">0 - Bootstrapping</a></li>
            <li class="SimpleList-li"><a href="step-01.html" class="SmallBlockLink">1 - Hello, World! <em>Make a Starting Point</em></a></li>
            <li class="SimpleList-li"><a href="step-02.html" class="SmallBlockLink">2 - Add a nested bundle <code>lib</code> <em>Add things from outside</em></a></li>
            <li class="SimpleList-li"><a href="step-03.html" class="SmallBlockLink">3 - A Few Styles <em>Make a Theme</em></a></li>
            <li class="SimpleList-li"><a href="step-04.html" class="SmallBlockLink">4 - <code>Todos.List</code> <em>Make a Component</em></a></li>
            <li class="SimpleList-li"><a href="step-05.html" class="SmallBlockLink">5 - <code>Todos.List</code>: Dynamic template <em>Data binding with Vue.js</em></a></li>
            <li class="SimpleList-li"><a href="step-06.html" class="SmallBlockLink">6 - Load data from the server <em>Use the service <code>Woc.Ajax</code></em></a></li>
            <li class="SimpleList-li"><a href="step-07.html" class="SmallBlockLink">7 - <code>Todos.Model</code> <em>Make a service</em></a></li>
            <li class="SimpleList-li"><a href="step-08.html" class="SmallBlockLink">8 - <code>Todos.List</code>: With the model</a></li>
            <li class="SimpleList-li"><a href="step-09.html" class="SmallBlockLink">9 - <code>Todos.CreateTask</code> <em>A component managed by a template</em></a></li>
            <li class="SimpleList-li"><a href="step-10.html" class="SmallBlockLink">10 - <code>Todos.Start</code>: several pages <em>Use a router</em></a></li>
            <li class="SimpleList-li"><a href="step-11.html" class="SmallBlockLink">11 - <code>Todos.EditPanel</code> <em>Double bind</em></a></li>
            <li class="SimpleList-li"><a href="step-12.html" class="SmallBlockLink">12 - <code>Todos.EditPanel</code>: with dialogs <em>Use the service <code>WocTeam.Dialogs</code></em></a></li>
            <li class="SimpleList-li"><a href="step-13.html" class="SmallBlockLink">13 - <code>Todos.DateInput</code>: A custom date picker? <em>Use a jQuery-ui widget</em></a></li>
            <li class="SimpleList-li"><a href="step-14.html" class="SmallBlockLink">14 - <code>Todos.Init</code>: Globally configure jQuery-ui <em>Make an initializer</em></a></li>
            <li class="SimpleList-li"><a href="step-15.html" class="SmallBlockLink">15 - Deploy! <em>Use the tool <code>woc-make</code></em></a></li>
          </ul>
        </nav>
      </div>
    </div>
    <footer class="SiteFooter">
      <div class="ob-pageWrapper large"><span class="ph-email"></span><a href="https://www.facebook.com/tarh.paleo" class="BlockLink">Facebook</a><a href="https://github.com/tarh/woc.ts" class="BlockLink">Contribute</a><a href="https://github.com/tarh/woc-site" class="BlockLink noMargin">Improve this site</a></div>
    </footer>
    <script src="/js/main.js"></script>
    <script src="/theme/prism.js"></script>
  </body>
</html>